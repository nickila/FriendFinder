<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">


    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP"
        crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    <title>Friend Finder Survey</title>
</head>

<body>

    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <br />
                <h2 class="display-6">Survey Questions</h2>
                <hr>

                <form>
                    <div class="form-group" id="myForm">

                        <div class="row">
                            <div class="col-md-12">
                                <h3 class="display-7">About You</h3>
                                <label for="name">Name (required)</label>
                                <input type="name" class="form-control" id="name">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group">
                                    <label for="photo">Link to Photo Image (required)</label>
                                    <input type="link" class="form-control" id="photoImage">
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 1</h4>
                                <label class="questions" for="Q1">What's your deal?</label>
                                <select class="form-control question" id="Q1">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 2</h4>
                                <label class="questions" for="Q2">What's your deal?</label>
                                <select class="form-control question" id="Q2">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 3</h4>
                                <label class="questions" for="Q3">What's your deal?</label>
                                <select class="form-control question" id="Q3">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 4</h4>
                                <label class="questions" for="Q4">What's your deal?</label>
                                <select class="form-control question" id="Q4">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 5</h4>
                                <label class="questions" for="Q5">What's your deal?</label>
                                <select class="form-control question" id="Q5">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 6</h4>
                                <label class="questions" for="Q6">What's your deal?</label>
                                <select class="form-control question" id="Q6">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 7</h4>
                                <label class="questions" for="Q7">What's your deal?</label>
                                <select class="form-control question" id="Q7">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 8</h4>
                                <label class="questions" for="Q8">What's your deal?</label>
                                <select class="form-control question" id="Q8">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 9</h4>
                                <label class="questions" for="Q9">What's your deal?</label>
                                <select class="form-control question" id="Q9">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12">
                                <h4>QUESTION 10</h4>
                                <label class="questions" for="Q10">What's your deal?</label>
                                <select class="form-control question" id="Q10">
                                    <option value="1">1 (strongly disagree)</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5 (strongly agree)</option>
                                </select>
                            </div>
                        </div>
                        <br />
                        <hr>
                        <div class="row">
                            <div class="col-md-12">
                                <button id="submitBtn" type="submit" class="btn btn-primary">Submit</button>
                            </div>
                        </div>
                </form>
            </div>
        </div>
        <a href="/api/friends">API Friends List</a> | <a href="https://github.com/nickila/FriendFinder">GitHub Repo</a>
    </div>
    <!-- <script src="../routing/htmlRoutes.js"></script>
    <script src="../routing/apiRoutes.js"></script>
    <script src="server.js"></script>
    <script src="../data/friends.js"></script> -->
    <script>
    // var jquery = require("jquery");

$(document).ready(function () {



    $("#submitBtn").click(function () {
        event.preventDefault();

        //var newFriend = [];
        var newFriend = {
            name: $("#name").val(),
            photo: $("#photoImage").val(),
            score: []
        };

        newFriend.score.push(parseInt($("#Q1").val()));
        newFriend.score.push(parseInt($("#Q2").val()));
        newFriend.score.push(parseInt($("#Q3").val()));
        newFriend.score.push(parseInt($("#Q4").val()));
        newFriend.score.push(parseInt($("#Q5").val()));
        newFriend.score.push(parseInt($("#Q6").val()));
        newFriend.score.push(parseInt($("#Q7").val()));
        newFriend.score.push(parseInt($("#Q8").val()));
        newFriend.score.push(parseInt($("#Q9").val()));
        newFriend.score.push(parseInt($("#Q10").val()));
        // newFriend.push(nameObj);

        console.log(newFriend.name);



        //  var score = [];
        //   score.push($(".form-control").val());
        //   score.push($("#Q2").val());
        //   score.push($("#Q3").val());
        //   score.push($("#Q4").val());
        //   $(".question") => [{},{},{}]
        var friends =
            [
                {
                    name: "snuggles",
                    img: "google.com",
                    score: [
                        1,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1,
                        1
                    ]
                },
                {
                    name: "doop",
                    img: "google.com",
                    score: [
                        2,
                        2,
                        2,
                        2,
                        2,
                        2,
                        2,
                        2,
                        2,
                        2
                    ]
                },
                {
                    name: "wiffer",
                    img: "google.com",
                    score: [
                        3,
                        3,
                        3,
                        3,
                        3,
                        3,
                        3,
                        3,
                        3,
                        3
                    ]
                }
            ]


        // var scoreArr = [];
        // var diff = [];
        // var tempArr = []
        // for (i = 0; i < friends.length; i++) {
        //     tempArr.push(friends[i].score)
        //     for (j = 0; j < tempArr.length; j++) {
        //         scoreArr.push(tempArr[j]);

        //     }

        // }
        function add(a, b) {
            return a + b;
        }
        // A. Push all scores from newFriend into an array.
        // B. Find difference of all scores from newFriend array together and save sum as a variable.
        var newScoreArr = [];
        for (i = 0; i < newFriend.score.length; i++) {
            newScoreArr.push(newFriend.score[i]);
        }
        //console.log(newScoreArr);
        var diff = [];
        var sum;

        // 1. Push scores from friends[0].score into an array.
        // 2. Find total difference of all scores from that array together and save sum as a variable.
        var sumArr = [];
        for (j = 0; j < friends.length; j++) {
            var friendsScoreArr = [];

            for (i = 0; i < friends[j].score.length; i++) {
                friendsScoreArr.push(friends[j].score[i])
            }

            for (k = 0; k < 5; k++) {
                var difference = (newScoreArr[k] - friendsScoreArr[k]);
                if (difference >= 0) {
                    diff.push(difference);

                } else if (difference < 0) {
                    difference = difference * -1;
                    diff.push(difference);
                }
            }
            sum = diff.reduce(add, 0);
            sumArr.push(sum);
            diff = [];
        }

        console.log("sumArr " + sumArr);

        function indexOfSmallest(a) {
            var lowest = 0;
            for (var i = 1; i < a.length; i++) {
                if (a[i] < a[lowest]) lowest = i;
            }
            alert(friends[lowest].name);
        }
        indexOfSmallest(sumArr);


        // Array.min = function( array ){
        //     return Math.min.apply( Math, array );
        // };


        // var minimum = Array.min(sumArr);
        // console.log(minimum);

        // 3. Check the two scores against each other. 
        // 4. Run a loop to check the difference of those two variables.

        // 5. Ultimately we want to run through the scores of user 1 and check it against new user, then user 2, user 3, etc. Save each difference in a new array. Then we can check which number is the smallest but running a loop of that array to see if any are 0, 1, 2, etc. Whichever is the first to hit true, find that index spot and return the corresponding index spot of users (friends).
        // console.log(scoreArr);
        //$.each(".question")
        //alert(score);
        
    });
});


</script>
</body>

</html>